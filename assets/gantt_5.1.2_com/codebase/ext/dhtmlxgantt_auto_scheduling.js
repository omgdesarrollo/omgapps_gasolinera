/*!
 * @license
 * 
 * dhtmlxGantt v.5.1.2 Professional
 * This software is covered by DHTMLX Commercial License. Usage without proper license is prohibited.
 * 
 * (c) Dinamenta, UAB.
 * 
 */
!function(t){function n(a){if(e[a])return e[a].exports;var r=e[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var e={};n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:a})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=2)}([,function(t,n){t.exports=function(t){t._get_linked_task=function(n,e){var a=null,r=e?n.target:n.source;t.isTaskExists(r)&&(a=t.getTask(r));var i=e?"target":"source";return t.assert(a,"Link "+i+" not found. Task id="+r+", link id="+n.id),a},t._get_link_target=function(n){return t._get_linked_task(n,!0)},t._get_link_source=function(n){return t._get_linked_task(n,!1)},t._formatLink=function(n){var e=[],a=this._get_link_target(n),r=this._get_link_source(n);if(!r||!a)return e;if(t.isChildOf(r.id,a.id)&&t.isSummaryTask(a)||t.isChildOf(a.id,r.id)&&t.isSummaryTask(r))return e;for(var i=this._getImplicitLinks(n,r,function(t){return 0}),s=t.config.auto_scheduling_move_projects,o=this.isSummaryTask(a)?this.getSubtaskDates(a.id):{start_date:a.start_date,end_date:a.end_date},u=this._getImplicitLinks(n,a,function(n){return s?n.$target.length||t.getState().drag_id==n.id?0:t.calculateDuration({start_date:o.start_date,end_date:n.start_date,task:r}):0}),g=0;g<i.length;g++)for(var c=i[g],l=0;l<u.length;l++){var d=u[l],h=1*c.lag+1*d.lag,f={id:n.id,type:n.type,source:c.task,target:d.task,lag:(1*n.lag||0)+h};e.push(t._convertToFinishToStartLink(d.task,f,r,a))}return e},t._isAutoSchedulable=function(t){return!1!==t.auto_scheduling},t._getImplicitLinks=function(t,n,e){var a=[];return this.isSummaryTask(n)?this.eachTask(function(t){this.isSummaryTask(t)||a.push({task:t.id,lag:e(t)})},n.id):a.push({task:n.id,lag:0}),a},t._getDirectDependencies=function(t,n){for(var e=[],a=[],r=n?t.$source:t.$target,i=0;i<r.length;i++){var s=this.getLink(r[i]);if(this.isTaskExists(s.source)&&this.isTaskExists(s.target)){var o=this.getTask(s.target);this._isAutoSchedulable(o)&&e.push(this.getLink(r[i]))}}for(var i=0;i<e.length;i++)a=a.concat(this._formatLink(e[i]));return a},t._getInheritedDependencies=function(t,n){var e=[],a=!1,r=[];if(this.isTaskExists(t.id)){this.eachParent(function(t){a||this.isSummaryTask(t)&&(this._isAutoSchedulable(t)?r.push.apply(r,this._getDirectDependencies(t,n)):a=!0)},t.id,this);for(var i=0;i<r.length;i++){(n?r[i].source:r[i].target)==t.id&&e.push(r[i])}}return e},t._getDirectSuccessors=function(t){return this._getDirectDependencies(t,!0)},t._getInheritedSuccessors=function(t){return this._getInheritedDependencies(t,!0)},t._getDirectPredecessors=function(t){return this._getDirectDependencies(t,!1)},t._getInheritedPredecessors=function(t){return this._getInheritedDependencies(t,!1)},t._getSuccessors=function(t){return this._getDirectSuccessors(t).concat(this._getInheritedSuccessors(t))},t._getPredecessors=function(t){return this._getDirectPredecessors(t).concat(this._getInheritedPredecessors(t))},t._convertToFinishToStartLink=function(n,e,a,r){var i={target:n,link:t.config.links.finish_to_start,id:e.id,lag:e.lag||0,source:e.source,preferredStart:null},s=0;switch(e.type){case t.config.links.start_to_start:s=-a.duration;break;case t.config.links.finish_to_finish:s=-r.duration;break;case t.config.links.start_to_finish:s=-a.duration-r.duration;break;default:s=0}return i.lag+=s,i}}},function(t,n,e){t.exports=e(3)},function(t,n,e){e(1)(gantt),gantt.config.auto_scheduling=!1,gantt.config.auto_scheduling_descendant_links=!1,gantt.config.auto_scheduling_initial=!0,gantt.config.auto_scheduling_strict=!1,gantt.config.auto_scheduling_move_projects=!0,function(){var t=e(4);gantt._autoSchedulingGraph={getVertices:function(n){var e={};t.forEach(n,function(t){e[t.target]=t.target,e[t.source]=t.source});var a=[];for(var r in e)a.push(e[r]);return a.sort(function(t,n){return gantt.getGlobalTaskIndex(t)-gantt.getGlobalTaskIndex(n)})},topologicalSort:function(t){for(var n=this.getVertices(t),e={},a=0;a<n.length;a++)e[n[a]]={id:n[a],$source:[],$target:[],$incoming:0};for(var a=0;a<t.length;a++){var r=e[t[a].target];r.$target.push(a),r.$incoming=r.$target.length,e[t[a].source].$source.push(a)}for(var i=n.filter(function(t){return!e[t].$incoming}),s=[];i.length;){var o=i.pop();s.push(o);for(var u=e[o],a=0;a<u.$source.length;a++){var g=e[t[u.$source[a]].target];g.$incoming--,g.$incoming||i.push(g.id)}}return s},tarjanStronglyConnectedComponents:function(n,e){function a(n,i){var c=r(n);if(c.index=s,c.lowLink=s,s++,i&&u.push(i),o.push(c),c.onStack=!0,t.forEach(e,function(t){if(t.source==n){var e=r(t.source),i=r(t.target);void 0===i.index?(a(t.target,t),e.lowLink=Math.min(e.lowLink,i.lowLink)):i.onStack&&(e.lowLink=Math.min(e.lowLink,i.index),u.push(t))}}),c.lowLink==c.index){var l,d={tasks:[],links:[]};do{var h=u.pop();l=o.pop(),l.onStack=!1,d.tasks.push(l.id),h&&d.links.push(h.id)}while(l.id!=c.id);g.push(d)}}function r(t){return i[t]||(i[t]={id:t}),i[t]}var i={},s=0,o=[],u=[],g=[];return t.forEach(n,function(t){void 0===r(t).index&&a(t)}),g}},gantt._autoSchedulingPath={getKey:function(t){return[t.lag,t.link,t.source,t.target].join("_")},getVirtualRoot:function(){return gantt.mixin(gantt.getSubtaskDates(),{id:gantt.config.root_id,type:gantt.config.types.project,$source:[],$target:[],$virtual:!0})},filterDuplicates:function(t){for(var n={},e=0;e<t.length;e++){var a=this.getKey(t[e]);n[a]?(t.splice(e,1),e--):n[a]=!0}return t},getLinkedTasks:function(t,n){for(var e=[t],a=[],r={},i=0;i<e.length;i++)a=a.concat(this._getLinkedTasks(e[i],r,n));return a=this.filterDuplicates(a)},_getLinkedTasks:function(t,n,e){var a=void 0===t?gantt.config.root_id:t,r=n||{},i=gantt.isTaskExists(a)?gantt.getTask(a):this.getVirtualRoot(),s=gantt._getSuccessors(i);e&&s.push.apply(s,gantt._getPredecessors(i));for(var o=[],u=0;u<s.length;u++)r[this.getKey(s[u])]||(r[this.getKey(s[u])]=!0,o=o.concat(this._getLinkedTasks(s[u].target,r,!0)));for(var g=gantt.getChildren(i.id),u=0;u<g.length;u++)s=s.concat(this._getLinkedTasks(g[u],r,!0));return o.length&&(s=s.concat(o)),s},findLoops:function(n){var e=[];t.forEach(n,function(t){t.target==t.source&&e.push([t.target,t.source])});var a=gantt._autoSchedulingGraph,r=a.getVertices(n),i=a.tarjanStronglyConnectedComponents(r,n);return t.forEach(i,function(t){t.tasks.length>1&&e.push(t)}),e}},gantt._autoSchedulingDateResolver={isFirstSmaller:function(t,n,e){return!!(t.valueOf()<n.valueOf()&&gantt._hasDuration(t,n,e))},isSmallerOrDefault:function(t,n,e){return!(t&&!this.isFirstSmaller(t,n,e))},resolveRelationDate:function(t,n,e){for(var a=null,r=null,i=null,s=0;s<n.length;s++){var o=n[s];t=o.target,i=o.preferredStart;var u=this.getConstraintDate(o,e);this.isSmallerOrDefault(i,u,gantt.getTask(t))&&this.isSmallerOrDefault(a,u,gantt.getTask(t))&&(a=u,r=o.id)}return a&&(a=gantt.getClosestWorkTime({date:a,dir:"future",task:gantt.getTask(t)})),{link:r,task:t,start_date:a}},getConstraintDate:function(t,n){var e=n(t.source),a=gantt.getTask(t.target),r=gantt.getClosestWorkTime({date:e,dir:"future",task:a});return e&&t.lag&&1*t.lag==t.lag&&(r=gantt.calculateEndDate({start_date:e,duration:1*t.lag,task:a})),r}},gantt._autoSchedulingPlanner={generatePlan:function(n){function e(t){var n=s[t],e=gantt.getTask(t);return n&&(n.start_date||n.end_date)?n.end_date?n.end_date:gantt.calculateEndDate({start_date:n.start_date,duration:e.duration,task:e}):e.end_date}var a=gantt._autoSchedulingGraph,r=a.topologicalSort(n),i={},s={};t.arrayMap(r,function(t){!1!==gantt.getTask(t).auto_scheduling&&(i[t]=[],s[t]=null)});for(var o=0;o<n.length;o++)i[n[o].target]&&i[n[o].target].push(n[o]);for(var u=gantt._autoSchedulingDateResolver,g=[],o=0;o<r.length;o++){var c=r[o],l=u.resolveRelationDate(c,i[c]||[],e);if(l.start_date&&gantt.isLinkExists(l.link)){var d=gantt.getLink(l.link),h=gantt.getTask(c),f=gantt.getTask(d.source);if(h.start_date.valueOf()!==l.start_date.valueOf()&&!1===gantt.callEvent("onBeforeTaskAutoSchedule",[h,l.start_date,d,f]))continue}s[c]=l,l.start_date&&g.push(l)}return g},applyProjectPlan:function(t){for(var n,e,a,r,i=[],s=0;s<t.length;s++)if(a=null,r=null,n=t[s],n.task){e=gantt.getTask(n.task),n.link&&(a=gantt.getLink(n.link),r=gantt.getTask(a.source));var o=null;n.start_date&&e.start_date.valueOf()!=n.start_date.valueOf()&&(o=n.start_date),o&&(e.start_date=o,e.end_date=gantt.calculateEndDate(e),i.push(e.id),gantt.callEvent("onAfterTaskAutoSchedule",[e,o,a,r]))}return i}},gantt._autoSchedulingPreferredDates=function(t,n){for(var e=0;e<n.length;e++){var a=n[e],r=gantt.getTask(a.target);gantt.config.auto_scheduling_strict&&a.target!=t||(a.preferredStart=new Date(r.start_date))}},gantt._autoSchedule=function(t,n,e){if(!1!==gantt.callEvent("onBeforeAutoSchedule",[t])){gantt._autoscheduling_in_progress=!0;var a=gantt._autoSchedulingPath,r=[],i=a.findLoops(n);if(i.length)gantt.callEvent("onAutoScheduleCircularLink",[i]);else{var s=gantt._autoSchedulingPlanner;gantt._autoSchedulingPreferredDates(t,n);var o=s.generatePlan(n);r=s.applyProjectPlan(o),e&&e(r)}return gantt._autoscheduling_in_progress=!1,gantt.callEvent("onAfterAutoSchedule",[t,r]),r}},gantt.autoSchedule=function(t,n){n=void 0===n||!!n;var e=gantt._autoSchedulingPath.getLinkedTasks(t,n);gantt._autoSchedule(t,e,gantt._finalizeAutoSchedulingChanges)},gantt._finalizeAutoSchedulingChanges=function(t){function n(t){if(!a){var e=t.start_date.valueOf(),r=t.end_date.valueOf();if(gantt.resetProjectDates(t),t.start_date.valueOf()!=e||t.end_date.valueOf()!=r)return void(a=!0);for(var i=gantt.getChildren(t.id),s=0;!a&&s<i.length;s++)n(gantt.getTask(i[s]))}}function e(){for(var n=0;n<t.length;n++)gantt.updateTask(t[n])}var a=!1;1==t.length?gantt.eachParent(n,t[0]):t.length&&(a=!0),a?gantt.batchUpdate(e):e()},gantt.isCircularLink=function(t){return!!gantt._getConnectedGroup(t)},gantt._getConnectedGroup=function(t){var n=gantt._autoSchedulingPath,e=n.getLinkedTasks();gantt.isLinkExists(t.id)||(e=e.concat(gantt._formatLink(t)));for(var a=n.findLoops(e),r=0;r<a.length;r++)for(var i=a[r].links,s=0;s<i.length;s++)if(i[s]==t.id)return a[r];return null},gantt.findCycles=function(){var t=gantt._autoSchedulingPath,n=t.getLinkedTasks();return t.findLoops(n)},gantt._attachAutoSchedulingHandlers=function(){function t(t,n){for(var e=!1,a=0;a<n.length;a++){var r=gantt.getLink(n[a].id);r.type!=gantt.config.links.start_to_start&&r.type!=gantt.config.links.start_to_finish||(n.splice(a,1),a--,e=!0)}if(e){for(var i={},a=0;a<n.length;a++)i[n[a].id]=!0;for(var s=gantt._autoSchedulingPath.getLinkedTasks(t,!0),a=0;a<s.length;a++)i[s[a].id]||n.push(s[a])}}gantt._autoScheduleAfterLinkChange=function(t,n){gantt.config.auto_scheduling&&!this._autoscheduling_in_progress&&gantt.autoSchedule(n.source)},gantt.attachEvent("onAfterLinkUpdate",gantt._autoScheduleAfterLinkChange),gantt.attachEvent("onAfterLinkAdd",gantt._autoScheduleAfterLinkChange),gantt.attachEvent("onAfterLinkDelete",function(t,n){if(this.config.auto_scheduling&&!this._autoscheduling_in_progress&&this.isTaskExists(n.target)){var e=this.getTask(n.target),a=this._getPredecessors(e);a.length&&this.autoSchedule(a[0].source,!1)}}),gantt.attachEvent("onParse",function(){gantt.config.auto_scheduling&&gantt.config.auto_scheduling_initial&&gantt.autoSchedule()}),gantt._preventCircularLink=function(t,n){return!gantt.isCircularLink(n)||(gantt.callEvent("onCircularLinkError",[n,gantt._getConnectedGroup(n)]),!1)},gantt._preventDescendantLink=function(t,n){var e=gantt.getTask(n.source),a=gantt.getTask(n.target);return!(!gantt.config.auto_scheduling_descendant_links&&(gantt.isChildOf(e.id,a.id)&&gantt.isSummaryTask(a)||gantt.isChildOf(a.id,e.id)&&gantt.isSummaryTask(e)))},gantt.attachEvent("onBeforeLinkAdd",gantt._preventCircularLink),gantt.attachEvent("onBeforeLinkAdd",gantt._preventDescendantLink),gantt.attachEvent("onBeforeLinkUpdate",gantt._preventCircularLink),gantt.attachEvent("onBeforeLinkUpdate",gantt._preventDescendantLink),gantt._datesNotEqual=function(t,n,e,a){return t.valueOf()>n.valueOf()?this._hasDuration({start_date:n,end_date:t,task:a}):this._hasDuration({start_date:t,end_date:n,task:e})},gantt._notEqualTaskDates=function(t,n){if(this._datesNotEqual(t.start_date,n.start_date,t,n)||(this._datesNotEqual(t.end_date,n.end_date,t,n)||t.duration!=n.duration)&&t.type!=gantt.config.types.milestone)return!0};var n,e;gantt.attachEvent("onBeforeTaskDrag",function(t,a,r){return gantt.config.auto_scheduling_move_projects&&(n=gantt._autoSchedulingPath.getLinkedTasks(t,!0),e=t),!0}),gantt._autoScheduleAfterDND=function(a,r){if(gantt.config.auto_scheduling&&!this._autoscheduling_in_progress){var i=this.getTask(a);gantt._notEqualTaskDates(r,i)&&(gantt.config.auto_scheduling_move_projects&&e==a?(gantt.calculateDuration(r)!=gantt.calculateDuration(i)&&t(a,n),gantt._autoSchedule(a,n,gantt._finalizeAutoSchedulingChanges)):gantt.autoSchedule(i.id))}return n=null,e=null,!0},gantt._lightBoxChangesHandler=function(t,n){if(gantt.config.auto_scheduling&&!this._autoscheduling_in_progress){var e=this.getTask(t);gantt._notEqualTaskDates(n,e)&&(gantt._autoschedule_lightbox_id=t)}return!0},gantt._lightBoxSaveHandler=function(t,n){return gantt.config.auto_scheduling&&!this._autoscheduling_in_progress&&gantt._autoschedule_lightbox_id&&gantt._autoschedule_lightbox_id==t&&(gantt._autoschedule_lightbox_id=null,gantt.autoSchedule(n.id)),!0},gantt.attachEvent("onBeforeTaskChanged",function(t,n,e){return gantt._autoScheduleAfterDND(t,e)}),gantt.attachEvent("onLightboxSave",gantt._lightBoxChangesHandler),gantt.attachEvent("onAfterTaskUpdate",gantt._lightBoxSaveHandler)},gantt.attachEvent("onGanttReady",function(){gantt._attachAutoSchedulingHandlers(),gantt._attachAutoSchedulingHandlers=function(){}})}()},function(t,n){function e(t){return i[t]||i.hour}function a(t,n){for(var e=t.slice(),a=0;a<e.length;a++)n(e[a],a)}function r(t,n){for(var e=t.slice(),a=[],r=0;r<e.length;r++)a.push(n(e[r],r));return a}var i={second:1,minute:60,hour:3600,day:86400,week:604800,month:2592e3,quarter:7776e3,year:31536e3};t.exports={getSecondsInUnit:e,forEach:a,arrayMap:r}}]);
//# sourceMappingURL=dhtmlxgantt_auto_scheduling.js.map